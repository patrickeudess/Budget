<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objectifs - Mon Budget Malin</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <h1>üèÜ Objectifs & D√©fis</h1>
        <p>D√©finissez vos objectifs d'√©pargne et relevez des d√©fis</p>
    </header>

    <nav class="breadcrumb">
        <a href="index.html">üè† Accueil</a> > Objectifs
    </nav>

    <!-- Onglets de navigation -->
    <div class="tabs-container">
        <button class="tab-button active" onclick="showTab('goals')">üéØ Mes Objectifs</button>
        <button class="tab-button" onclick="showTab('challenges')">üèÖ D√©fis</button>
        <button class="tab-button" onclick="showTab('achievements')">üèÜ R√©alisations</button>
    </div>

    <!-- Section Objectifs -->
    <section id="goals-tab" class="tab-content active">
        <h2>üéØ Mes Objectifs d'√©pargne</h2>
        
        <!-- R√©sum√© des objectifs -->
        <div class="goals-overview">
            <div class="goal-stat">
                <span class="stat-label">Objectifs actifs :</span>
                <span id="active-goals-count" class="stat-value">0</span>
            </div>
            <div class="goal-stat">
                <span class="stat-label">Total √©pargn√© :</span>
                <span id="total-saved" class="stat-value positive">0 FCFA</span>
            </div>
            <div class="goal-stat">
                <span class="stat-label">Objectifs atteints :</span>
                <span id="completed-goals-count" class="stat-value">0</span>
            </div>
            <div class="goal-stat">
                <span class="stat-label">Progression moyenne :</span>
                <span id="average-progress" class="stat-value">0%</span>
            </div>
        </div>

        <!-- Actions rapides -->
        <div class="goals-actions">
            <button onclick="showCreateGoalModal()" class="btn-primary">‚ûï Cr√©er un objectif</button>
            <button onclick="showQuickSaveModal()" class="btn-secondary">üí∞ √âpargner rapidement</button>
        </div>

        <!-- Liste des objectifs -->
        <div class="goals-container">
            <h3>üìã Mes objectifs en cours</h3>
            <div id="goals-list">
                <!-- Les objectifs seront affich√©s ici -->
            </div>
        </div>

        <!-- Objectifs compl√©t√©s -->
        <div class="completed-goals-container">
            <h3>‚úÖ Objectifs atteints</h3>
            <div id="completed-goals-list">
                <!-- Les objectifs compl√©t√©s seront affich√©s ici -->
            </div>
        </div>
    </section>

    <!-- Section D√©fis -->
    <section id="challenges-tab" class="tab-content">
        <h2>üèÖ D√©fis d'√©pargne</h2>
        
        <!-- D√©fis actifs -->
        <div class="challenges-container">
            <h3>üî• D√©fis en cours</h3>
            <div id="active-challenges">
                <!-- Les d√©fis actifs seront affich√©s ici -->
            </div>
        </div>

        <!-- Nouveaux d√©fis disponibles -->
        <div class="available-challenges-container">
            <h3>üéØ D√©fis disponibles</h3>
            <div id="available-challenges">
                <!-- Les d√©fis disponibles seront affich√©s ici -->
            </div>
        </div>

        <!-- D√©fis compl√©t√©s -->
        <div class="completed-challenges-container">
            <h3>üèÜ D√©fis r√©ussis</h3>
            <div id="completed-challenges">
                <!-- Les d√©fis compl√©t√©s seront affich√©s ici -->
            </div>
        </div>
    </section>

    <!-- Section R√©alisations -->
    <section id="achievements-tab" class="tab-content">
        <h2>üèÜ Mes R√©alisations</h2>
        
        <!-- Statistiques des r√©alisations -->
        <div class="achievements-overview">
            <div class="achievement-stat">
                <span class="stat-label">Badges gagn√©s :</span>
                <span id="badges-earned" class="stat-value">0</span>
            </div>
            <div class="achievement-stat">
                <span class="stat-label">D√©fis r√©ussis :</span>
                <span id="challenges-completed" class="stat-value">0</span>
            </div>
            <div class="achievement-stat">
                <span class="stat-label">Objectifs atteints :</span>
                <span id="goals-completed" class="stat-value">0</span>
            </div>
            <div class="achievement-stat">
                <span class="stat-label">Score total :</span>
                <span id="total-score" class="stat-value">0</span>
            </div>
        </div>

        <!-- Badges et r√©compenses -->
        <div class="badges-container">
            <h3>üèÖ Mes Badges</h3>
            <div id="badges-grid">
                <!-- Les badges seront affich√©s ici -->
            </div>
        </div>

        <!-- Historique des r√©alisations -->
        <div class="achievements-history">
            <h3>üìà Historique des r√©alisations</h3>
            <div id="achievements-timeline">
                <!-- L'historique sera affich√© ici -->
            </div>
        </div>
    </section>

    <!-- Modal pour cr√©er un objectif -->
    <div id="createGoalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üéØ Cr√©er un nouvel objectif</h3>
                <button onclick="closeModal('createGoalModal')" class="modal-close">&times;</button>
            </div>
            <form id="createGoalForm">
                <div class="form-group">
                    <label for="goalName">Nom de l'objectif :</label>
                    <input type="text" id="goalName" placeholder="Ex: Voyage en Europe" required>
                </div>
                
                <div class="form-group">
                    <label for="goalDescription">Description :</label>
                    <textarea id="goalDescription" placeholder="D√©crivez votre objectif..." rows="3"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="goalTarget">Montant cible (FCFA) :</label>
                        <input type="number" id="goalTarget" placeholder="0" required min="1000" step="1000">
                    </div>
                    <div class="form-group">
                        <label for="goalDeadline">Date limite :</label>
                        <input type="date" id="goalDeadline" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="goalCategory">Cat√©gorie :</label>
                        <select id="goalCategory" required>
                            <option value="">S√©lectionnez une cat√©gorie</option>
                            <option value="voyage">‚úàÔ∏è Voyage</option>
                            <option value="maison">üè† Maison</option>
                            <option value="voiture">üöó V√©hicule</option>
                            <option value="education">üìö √âducation</option>
                            <option value="sante">üè• Sant√©</option>
                            <option value="loisirs">üéÆ Loisirs</option>
                            <option value="investissement">üìà Investissement</option>
                            <option value="urgence">üö® Fonds d'urgence</option>
                            <option value="autre">üí° Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="goalIcon">Ic√¥ne :</label>
                        <select id="goalIcon" required>
                            <option value="üéØ">üéØ Objectif</option>
                            <option value="‚úàÔ∏è">‚úàÔ∏è Voyage</option>
                            <option value="üè†">üè† Maison</option>
                            <option value="üöó">üöó Voiture</option>
                            <option value="üìö">üìö √âducation</option>
                            <option value="üè•">üè• Sant√©</option>
                            <option value="üéÆ">üéÆ Loisirs</option>
                            <option value="üìà">üìà Investissement</option>
                            <option value="üí∞">üí∞ √âpargne</option>
                            <option value="üéÅ">üéÅ Cadeau</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-primary">üíæ Cr√©er l'objectif</button>
                    <button type="button" onclick="closeModal('createGoalModal')" class="btn-secondary">‚ùå Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal pour √©pargner rapidement -->
    <div id="quickSaveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí∞ √âpargner rapidement</h3>
                <button onclick="closeModal('quickSaveModal')" class="modal-close">&times;</button>
            </div>
            <form id="quickSaveForm">
                <div class="form-group">
                    <label for="quickSaveAmount">Montant √† √©pargner (FCFA) :</label>
                    <input type="number" id="quickSaveAmount" placeholder="0" required min="100" step="100">
                </div>
                
                <div class="form-group">
                    <label for="quickSaveGoal">R√©partir sur :</label>
                    <select id="quickSaveGoal" required>
                        <option value="">S√©lectionnez un objectif</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="quickSaveDescription">Description (optionnel) :</label>
                    <input type="text" id="quickSaveDescription" placeholder="Ex: √âpargne du mois">
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-primary">üíæ √âpargner</button>
                    <button type="button" onclick="closeModal('quickSaveModal')" class="btn-secondary">‚ùå Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <div class="page-actions">
        <button onclick="window.location.href='index.html'" class="btn-secondary">üè† Accueil</button>
        <button onclick="window.location.href='transactions.html'" class="btn-primary">üìù Transactions</button>
    </div>

    <script src="goals.js"></script>
    <script>
        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            initializeGoalsPage();
        });

        function initializeGoalsPage() {
            // Charger les donn√©es
            loadGoalsData();
            loadChallengesData();
            loadAchievementsData();
            
            // Initialiser les formulaires
            initializeForms();
        }

        function showTab(tabName) {
            // Masquer tous les onglets
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Afficher l'onglet s√©lectionn√©
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
            
            // Recharger les donn√©es si n√©cessaire
            if (tabName === 'goals') {
                loadGoalsData();
            } else if (tabName === 'challenges') {
                loadChallengesData();
            } else if (tabName === 'achievements') {
                loadAchievementsData();
            }
        }

        function loadGoalsData() {
            const goalsManager = new GoalsManager();
            const goals = goalsManager.getActiveGoals();
            const completedGoals = goalsManager.getCompletedGoals();
            
            updateGoalsOverview(goals, completedGoals);
            displayGoals(goals);
            displayCompletedGoals(completedGoals);
        }

        function loadChallengesData() {
            const goalsManager = new GoalsManager();
            const activeChallenges = goalsManager.getActiveChallenges();
            const availableChallenges = goalsManager.getAvailableChallenges();
            const completedChallenges = goalsManager.getCompletedChallenges();
            
            displayActiveChallenges(activeChallenges);
            displayAvailableChallenges(availableChallenges);
            displayCompletedChallenges(completedChallenges);
        }

        function loadAchievementsData() {
            const goalsManager = new GoalsManager();
            const achievements = goalsManager.getAchievements();
            const badges = goalsManager.getBadges();
            
            updateAchievementsOverview(achievements);
            displayBadges(badges);
            displayAchievementsTimeline(achievements);
        }

        function updateGoalsOverview(goals, completedGoals) {
            const totalSaved = goals.reduce((sum, goal) => sum + goal.saved, 0);
            const totalProgress = goals.length > 0 ? 
                goals.reduce((sum, goal) => sum + (goal.saved / goal.target * 100), 0) / goals.length : 0;
            
            document.getElementById('active-goals-count').textContent = goals.length;
            document.getElementById('total-saved').textContent = `${totalSaved.toLocaleString()} FCFA`;
            document.getElementById('completed-goals-count').textContent = completedGoals.length;
            document.getElementById('average-progress').textContent = `${totalProgress.toFixed(0)}%`;
        }

        function displayGoals(goals) {
            const container = document.getElementById('goals-list');
            container.innerHTML = '';
            
            if (goals.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <p>üéØ Aucun objectif d√©fini</p>
                        <p>Cr√©ez votre premier objectif d'√©pargne !</p>
                        <button onclick="showCreateGoalModal()" class="btn-primary">Cr√©er un objectif</button>
                    </div>
                `;
                return;
            }
            
            goals.forEach(goal => {
                const progress = (goal.saved / goal.target) * 100;
                const daysLeft = Math.ceil((new Date(goal.deadline) - new Date()) / (1000 * 60 * 60 * 24));
                
                const goalCard = document.createElement('div');
                goalCard.className = 'goal-card';
                goalCard.innerHTML = `
                    <div class="goal-header">
                        <div class="goal-icon">${goal.icon}</div>
                        <div class="goal-info">
                            <h3>${goal.name}</h3>
                            <p class="goal-description">${goal.description}</p>
                            <p class="goal-category">${getCategoryLabel(goal.category)}</p>
                        </div>
                        <div class="goal-actions">
                            <button onclick="addToGoal(${goal.id})" class="btn-small">üí∞ Ajouter</button>
                            <button onclick="editGoal(${goal.id})" class="btn-small">‚úèÔ∏è Modifier</button>
                            <button onclick="deleteGoal(${goal.id})" class="btn-small btn-delete">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-info">
                            <span>${goal.saved.toLocaleString()} / ${goal.target.toLocaleString()} FCFA</span>
                            <span>${progress.toFixed(0)}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                        </div>
                        <div class="goal-details">
                            <span class="goal-deadline">üìÖ ${formatDate(goal.deadline)}</span>
                            <span class="goal-days-left ${daysLeft <= 30 ? 'urgent' : ''}">‚è∞ ${daysLeft} jours restants</span>
                        </div>
                    </div>
                `;
                
                container.appendChild(goalCard);
            });
        }

        function displayCompletedGoals(completedGoals) {
            const container = document.getElementById('completed-goals-list');
            container.innerHTML = '';
            
            if (completedGoals.length === 0) {
                container.innerHTML = '<p class="empty-message">Aucun objectif compl√©t√© pour le moment.</p>';
                return;
            }
            
            completedGoals.forEach(goal => {
                const goalCard = document.createElement('div');
                goalCard.className = 'goal-card completed';
                goalCard.innerHTML = `
                    <div class="goal-header">
                        <div class="goal-icon">${goal.icon}</div>
                        <div class="goal-info">
                            <h3>${goal.name}</h3>
                            <p class="goal-description">${goal.description}</p>
                            <p class="goal-category">${getCategoryLabel(goal.category)}</p>
                        </div>
                        <div class="goal-status">
                            <span class="status-badge success">‚úÖ Atteint</span>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-info">
                            <span>${goal.target.toLocaleString()} FCFA</span>
                            <span>100%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                        <div class="goal-details">
                            <span class="goal-completed-date">‚úÖ Atteint le ${formatDate(goal.completedDate)}</span>
                        </div>
                    </div>
                `;
                
                container.appendChild(goalCard);
            });
        }

        function displayActiveChallenges(challenges) {
            const container = document.getElementById('active-challenges');
            container.innerHTML = '';
            
            if (challenges.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <p>üî• Aucun d√©fi actif</p>
                        <p>Relevez un d√©fi pour commencer !</p>
                    </div>
                `;
                return;
            }
            
            challenges.forEach(challenge => {
                const progress = (challenge.current / challenge.target) * 100;
                const daysLeft = Math.ceil((new Date(challenge.deadline) - new Date()) / (1000 * 60 * 60 * 24));
                
                const challengeCard = document.createElement('div');
                challengeCard.className = 'challenge-card active';
                challengeCard.innerHTML = `
                    <div class="challenge-header">
                        <div class="challenge-icon">${challenge.icon}</div>
                        <div class="challenge-info">
                            <h3>${challenge.name}</h3>
                            <p>${challenge.description}</p>
                            <p class="challenge-reward">üèÖ ${challenge.reward}</p>
                        </div>
                        <div class="challenge-status">
                            <span class="status-badge ${progress >= 100 ? 'success' : 'warning'}">
                                ${progress >= 100 ? '‚úÖ R√©ussi' : 'üî• En cours'}
                            </span>
                        </div>
                    </div>
                    <div class="challenge-progress">
                        <div class="progress-info">
                            <span>${challenge.current} / ${challenge.target}</span>
                            <span>${progress.toFixed(0)}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                        </div>
                        <div class="challenge-details">
                            <span class="challenge-deadline">üìÖ ${formatDate(challenge.deadline)}</span>
                            <span class="challenge-days-left">‚è∞ ${daysLeft} jours restants</span>
                        </div>
                    </div>
                `;
                
                container.appendChild(challengeCard);
            });
        }

        function displayAvailableChallenges(challenges) {
            const container = document.getElementById('available-challenges');
            container.innerHTML = '';
            
            challenges.forEach(challenge => {
                const challengeCard = document.createElement('div');
                challengeCard.className = 'challenge-card available';
                challengeCard.innerHTML = `
                    <div class="challenge-header">
                        <div class="challenge-icon">${challenge.icon}</div>
                        <div class="challenge-info">
                            <h3>${challenge.name}</h3>
                            <p>${challenge.description}</p>
                            <p class="challenge-reward">üèÖ ${challenge.reward}</p>
                        </div>
                        <div class="challenge-actions">
                            <button onclick="acceptChallenge(${challenge.id})" class="btn-small">üéØ Accepter</button>
                        </div>
                    </div>
                    <div class="challenge-details">
                        <span class="challenge-duration">‚è±Ô∏è ${challenge.duration} jours</span>
                        <span class="challenge-difficulty">‚≠ê ${'‚òÖ'.repeat(challenge.difficulty)}</span>
                    </div>
                `;
                
                container.appendChild(challengeCard);
            });
        }

        function displayCompletedChallenges(challenges) {
            const container = document.getElementById('completed-challenges');
            container.innerHTML = '';
            
            if (challenges.length === 0) {
                container.innerHTML = '<p class="empty-message">Aucun d√©fi compl√©t√© pour le moment.</p>';
                return;
            }
            
            challenges.forEach(challenge => {
                const challengeCard = document.createElement('div');
                challengeCard.className = 'challenge-card completed';
                challengeCard.innerHTML = `
                    <div class="challenge-header">
                        <div class="challenge-icon">${challenge.icon}</div>
                        <div class="challenge-info">
                            <h3>${challenge.name}</h3>
                            <p>${challenge.description}</p>
                            <p class="challenge-reward">üèÖ ${challenge.reward}</p>
                        </div>
                        <div class="challenge-status">
                            <span class="status-badge success">‚úÖ R√©ussi</span>
                        </div>
                    </div>
                    <div class="challenge-details">
                        <span class="challenge-completed-date">‚úÖ R√©ussi le ${formatDate(challenge.completedDate)}</span>
                    </div>
                `;
                
                container.appendChild(challengeCard);
            });
        }

        function updateAchievementsOverview(achievements) {
            const badgesEarned = achievements.filter(a => a.type === 'badge').length;
            const challengesCompleted = achievements.filter(a => a.type === 'challenge').length;
            const goalsCompleted = achievements.filter(a => a.type === 'goal').length;
            const totalScore = achievements.reduce((sum, a) => sum + a.score, 0);
            
            document.getElementById('badges-earned').textContent = badgesEarned;
            document.getElementById('challenges-completed').textContent = challengesCompleted;
            document.getElementById('goals-completed').textContent = goalsCompleted;
            document.getElementById('total-score').textContent = totalScore;
        }

        function displayBadges(badges) {
            const container = document.getElementById('badges-grid');
            container.innerHTML = '';
            
            badges.forEach(badge => {
                const badgeCard = document.createElement('div');
                badgeCard.className = `badge-card ${badge.earned ? 'earned' : 'locked'}`;
                badgeCard.innerHTML = `
                    <div class="badge-icon">${badge.icon}</div>
                    <h3>${badge.name}</h3>
                    <p>${badge.description}</p>
                    <span class="badge-status">${badge.earned ? '‚úÖ Gagn√©' : 'üîí Verrouill√©'}</span>
                `;
                
                container.appendChild(badgeCard);
            });
        }

        function displayAchievementsTimeline(achievements) {
            const container = document.getElementById('achievements-timeline');
            container.innerHTML = '';
            
            if (achievements.length === 0) {
                container.innerHTML = '<p class="empty-message">Aucune r√©alisation pour le moment.</p>';
                return;
            }
            
            achievements.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            achievements.forEach(achievement => {
                const achievementItem = document.createElement('div');
                achievementItem.className = 'achievement-item';
                achievementItem.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-info">
                        <h3>${achievement.title}</h3>
                        <p>${achievement.description}</p>
                        <span class="achievement-date">${formatDate(achievement.date)}</span>
                    </div>
                    <div class="achievement-score">
                        <span>+${achievement.score} pts</span>
                    </div>
                `;
                
                container.appendChild(achievementItem);
            });
        }

        // Fonctions modales
        function showCreateGoalModal() {
            document.getElementById('createGoalModal').style.display = 'flex';
            document.getElementById('goalDeadline').value = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
        }

        function showQuickSaveModal() {
            const goalsManager = new GoalsManager();
            const goals = goalsManager.getActiveGoals();
            
            const select = document.getElementById('quickSaveGoal');
            select.innerHTML = '<option value="">S√©lectionnez un objectif</option>';
            
            goals.forEach(goal => {
                const option = document.createElement('option');
                option.value = goal.id;
                option.textContent = `${goal.name} (${goal.saved.toLocaleString()}/${goal.target.toLocaleString()} FCFA)`;
                select.appendChild(option);
            });
            
            document.getElementById('quickSaveModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function initializeForms() {
            // Formulaire de cr√©ation d'objectif
            document.getElementById('createGoalForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const goal = {
                    name: document.getElementById('goalName').value,
                    description: document.getElementById('goalDescription').value,
                    target: parseFloat(document.getElementById('goalTarget').value),
                    deadline: document.getElementById('goalDeadline').value,
                    category: document.getElementById('goalCategory').value,
                    icon: document.getElementById('goalIcon').value,
                    saved: 0,
                    id: Date.now(),
                    createdAt: new Date().toISOString()
                };
                
                const goalsManager = new GoalsManager();
                goalsManager.createGoal(goal);
                
                closeModal('createGoalModal');
                loadGoalsData();
                showNotification('Objectif cr√©√© avec succ√®s !', 'success');
            });
            
            // Formulaire d'√©pargne rapide
            document.getElementById('quickSaveForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const amount = parseFloat(document.getElementById('quickSaveAmount').value);
                const goalId = parseInt(document.getElementById('quickSaveGoal').value);
                const description = document.getElementById('quickSaveDescription').value;
                
                if (!goalId) {
                    showNotification('Veuillez s√©lectionner un objectif', 'error');
                    return;
                }
                
                const goalsManager = new GoalsManager();
                goalsManager.addToGoal(goalId, amount, description);
                
                closeModal('quickSaveModal');
                loadGoalsData();
                showNotification(`√âpargn√© ${amount.toLocaleString()} FCFA !`, 'success');
            });
        }

        // Fonctions d'action
        function addToGoal(goalId) {
            const amount = prompt('Montant √† ajouter (FCFA) :');
            if (!amount || isNaN(amount)) return;
            
            const description = prompt('Description (optionnel) :');
            
            const goalsManager = new GoalsManager();
            goalsManager.addToGoal(goalId, parseFloat(amount), description);
            
            loadGoalsData();
            showNotification(`Ajout√© ${parseFloat(amount).toLocaleString()} FCFA !`, 'success');
        }

        function editGoal(goalId) {
            // Impl√©mentation de l'√©dition d'objectif
            showNotification('Fonctionnalit√© en cours de d√©veloppement', 'info');
        }

        function deleteGoal(goalId) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer cet objectif ?')) {
                const goalsManager = new GoalsManager();
                goalsManager.deleteGoal(goalId);
                
                loadGoalsData();
                showNotification('Objectif supprim√©', 'success');
            }
        }

        function acceptChallenge(challengeId) {
            const goalsManager = new GoalsManager();
            goalsManager.acceptChallenge(challengeId);
            
            loadChallengesData();
            showNotification('D√©fi accept√© !', 'success');
        }

        // Fonctions utilitaires
        function getCategoryLabel(category) {
            const labels = {
                'voyage': '‚úàÔ∏è Voyage',
                'maison': 'üè† Maison',
                'voiture': 'üöó V√©hicule',
                'education': 'üìö √âducation',
                'sante': 'üè• Sant√©',
                'loisirs': 'üéÆ Loisirs',
                'investissement': 'üìà Investissement',
                'urgence': 'üö® Fonds d\'urgence',
                'autre': 'üí° Autre'
            };
            return labels[category] || category;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('fr-FR');
        }

        function showNotification(message, type = 'info') {
            if (window.showNotification) {
                window.showNotification(message, type);
            } else {
                console.log(`[${type.toUpperCase()}] ${message}`);
            }
        }

        // Fermer les modales en cliquant √† l'ext√©rieur
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html> 