<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Mon Budget Malin">
    <title>Mon Budget Malin - Gestion de budget intelligente</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="enhanced-styles.css">
    <link rel="stylesheet" href="modern-components.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <script src="plotly.js"></script>
</head>
<body>
    <!-- VÃ©rification d'authentification -->
    <script>
        // VÃ©rifier si l'utilisateur est connectÃ©
        function checkAuth() {
            const token = localStorage.getItem('auth_token');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
        }
        
        // ExÃ©cuter la vÃ©rification au chargement
        checkAuth();
    </script>

    <!-- Barre de navigation avec gestion de connexion -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="icon-192.png" alt="Logo" class="nav-logo">
                <span class="nav-title">ğŸ’° Mon Budget Malin</span>
            </div>
            <div class="nav-user">
                <div id="connection-status" class="connection-status">
                    <span class="status-indicator offline">ğŸ”´ Hors ligne</span>
                </div>
                <div id="user-info" class="user-info">
                    <span id="user-name" class="user-name">ğŸ‘¤ <span id="display-name">Utilisateur</span></span>
                    <button id="logout-btn" class="logout-btn">ğŸšª DÃ©connexion</button>
                </div>
            </div>
        </div>
    </nav>

    <nav class="breadcrumb">
        <a href="index.html">ğŸ  Accueil</a>
    </nav>

    <!-- RÃ©sumÃ© rapide amÃ©liorÃ© -->
    <section>
        <h2>ğŸ“Š Vue d'ensemble</h2>
        <div class="quick-summary">
            <div class="summary-card revenus hover-scale" data-animation="slideInUp">
                <div class="summary-icon">ğŸ’°</div>
                <h3>Revenus du mois</h3>
                <p id="total-revenus" class="animated-value">0 FCFA</p>
                <small>Total des entrÃ©es</small>
                <div class="summary-trend positive">â†—ï¸ +12%</div>
            </div>
            <div class="summary-card depenses hover-scale" data-animation="slideInUp">
                <div class="summary-icon">ğŸ’¸</div>
                <h3>DÃ©penses du mois</h3>
                <p id="total-depenses" class="animated-value">0 FCFA</p>
                <small>Total des sorties</small>
                <div class="summary-trend negative">â†˜ï¸ -8%</div>
            </div>
            <div class="summary-card solde hover-scale" data-animation="slideInUp">
                <div class="summary-icon">ğŸ’³</div>
                <h3>Solde actuel</h3>
                <p id="solde-actuel" class="animated-value">0 FCFA</p>
                <small>Revenus - DÃ©penses</small>
                <div class="summary-trend positive">â†—ï¸ +5%</div>
            </div>
        </div>
    </section>

    <!-- Navigation principale amÃ©liorÃ©e -->
    <section>
        <h2>ğŸš€ Actions rapides</h2>
        <div class="nav-grid">
            <a href="dashboard.html" class="nav-card primary hover-glow" data-animation="slideInUp">
                <span class="nav-icon">ğŸ“Š</span>
                <h3>Dashboard Intelligent</h3>
                <p>Vue d'ensemble avec analyses prÃ©dictives et recommandations</p>
                <div class="badge-modern success">Nouveau</div>
            </a>
            <a href="transactions.html" class="nav-card hover-glow" data-animation="slideInUp">
                <span class="nav-icon">ğŸ’³</span>
                <h3>Transactions</h3>
                <p>GÃ©rez vos revenus et dÃ©penses</p>
            </a>
            <a href="budgets.html" class="nav-card hover-glow" data-animation="slideInUp">
                <span class="nav-icon">ğŸ¯</span>
                <h3>Budgets</h3>
                <p>DÃ©finissez et suivez vos budgets</p>
            </a>
            <a href="goals.html" class="nav-card hover-glow" data-animation="slideInUp">
                <span class="nav-icon">ğŸ†</span>
                <h3>Objectifs</h3>
                <p>Atteignez vos objectifs financiers</p>
            </a>
            <a href="tips.html" class="nav-card hover-glow" data-animation="slideInUp">
                <span class="nav-icon">ğŸ’¡</span>
                <h3>Conseils</h3>
                <p>Conseils pour optimiser votre budget</p>
            </a>
        </div>
    </section>

    <script src="app.js"></script>
    <script>
        // Afficher le nom de l'utilisateur
        function displayUserInfo() {
            const userName = localStorage.getItem('user_name') || 'Utilisateur';
            document.getElementById('display-name').textContent = userName;
        }

        // GÃ©rer la dÃ©connexion
        document.getElementById('logout-btn').addEventListener('click', function() {
            localStorage.removeItem('auth_token');
            localStorage.removeItem('user_email');
            localStorage.removeItem('user_name');
            window.location.href = 'login.html';
        });

        // Afficher les informations utilisateur au chargement
        displayUserInfo();

        // Animations d'entrÃ©e
        function animateOnScroll() {
            const elements = document.querySelectorAll('[data-animation]');
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('animate');
                }
            });
        }

        // Ã‰couter le scroll pour les animations
        window.addEventListener('scroll', animateOnScroll);
        animateOnScroll(); // ExÃ©cuter une fois au chargement
    </script>
</body>
</html>